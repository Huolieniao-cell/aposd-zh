<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>Chapter 4 Modules Should Be Deep | A Philosophy of Software Design</title><meta name="description" content="">
    <link rel="preload" href="/aposd-zh/assets/style-C3ozQjM4.css" as="style"><link rel="stylesheet" href="/aposd-zh/assets/style-C3ozQjM4.css">
    <link rel="modulepreload" href="/aposd-zh/assets/app-BS85qt4H.js"><link rel="modulepreload" href="/aposd-zh/assets/ch04.html-Du8yCi7y.js">
    <link rel="prefetch" href="/aposd-zh/assets/index.html-DDuV2ksy.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-CbbeyajK.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-CwpMLBjI.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-BiOHW_wT.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-Be67wPbr.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-CrcHXtgR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-CL0lXqpR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-bbj5Gux0.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-CXBSuL1P.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-DUHfoQRY.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-BhTS1RDl.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-D0tU11aB.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-NN8vjC6h.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-D5sCsaTw.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-Dk4Y_rBn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-V06sEL6g.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-CzF-uhfF.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-bkHipLw8.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-BrgBgYUk.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-UL5672fR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-DWpM6aM6.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-CuWWB7vn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-D0sjjT4i.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-z9Ml2SSj.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-xnuB-ccx.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-BsPOzA-L.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-9dV84UEQ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-3kAFDu0b.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-BiR5Hfb_.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-CRRfe4H7.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-S3xgpNMO.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-C-kMDkKl.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-316u6MGu.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-CuptmDBx.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-CzCXrFW4.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-B4jcd5a7.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-ADKl46rW.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-CdxvwIbq.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-C3x5ZNkA.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-D2ntPCZz.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-DuLx_auc.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-BAc1uNZF.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-Djd5vVwv.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-D-cgj0ml.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-DzOrSm-1.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-UxvbhB11.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-DATuVFab.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-iiJWHozC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-BZHyF2Ss.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-23F5AgI9.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-Bf1iUSwy.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-DfzmxjPW.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-BjYpQJWl.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-Cnvpym0w.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-C_-849IE.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-DbKGm5h9.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-Dr92J44J.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-GFKerN9h.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-BnaYyvV5.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-BYZj-cmS.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-D1SapDCf.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-Cz0lGbc7.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-C7quMbmn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-Bzf8v0lY.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-D_N-J650.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-Cjx0xI3Q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-EiAryhTy.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-BsBXdA_R.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-CgDajwpw.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-CMUjvO6V.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-D0ep9WFp.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/404.html-Gd_fX9Ks.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/aposd-zh/en/"><!----><span class="site-name" aria-hidden="true">A Philosophy of Software Design</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/aposd-zh/ch04.html" aria-label="简体中文"><!--[--><!--[--><!--]--> 简体中文 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/aposd-zh/" aria-label="English"><!--[--><!--[--><!--]--> English <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/aposd-zh/zh-tw/ch04.html" aria-label="繁体中文"><!--[--><!--[--><!--]--> 繁体中文 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/yingang/aposd-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/aposd-zh/ch04.html" aria-label="简体中文"><!--[--><!--[--><!--]--> 简体中文 <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/aposd-zh/" aria-label="English"><!--[--><!--[--><!--]--> English <!--[--><!--]--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link" href="/aposd-zh/zh-tw/ch04.html" aria-label="繁体中文"><!--[--><!--[--><!--]--> 繁体中文 <!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/yingang/aposd-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Chapter 4 Modules Should Be Deep <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="#_4-1-modular-design" aria-label="4.1 Modular design"><!--[--><!--[--><!--]--> 4.1 Modular design <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-2-what-s-in-an-interface" aria-label="4.2 What’s in an interface?"><!--[--><!--[--><!--]--> 4.2 What’s in an interface? <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-3-abstractions" aria-label="4.3 Abstractions"><!--[--><!--[--><!--]--> 4.3 Abstractions <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-4-deep-modules" aria-label="4.4 Deep modules"><!--[--><!--[--><!--]--> 4.4 Deep modules <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-5-shallow-modules" aria-label="4.5 Shallow modules"><!--[--><!--[--><!--]--> 4.5 Shallow modules <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-6-classitis" aria-label="4.6 Classitis"><!--[--><!--[--><!--]--> 4.6 Classitis <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-7-examples-java-and-unix-i-o" aria-label="4.7 Examples: Java and Unix I/O"><!--[--><!--[--><!--]--> 4.7 Examples: Java and Unix I/O <!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="#_4-8-conclusion" aria-label="4.8 Conclusion"><!--[--><!--[--><!--]--> 4.8 Conclusion <!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="chapter-4-modules-should-be-deep" tabindex="-1"><a class="header-anchor" href="#chapter-4-modules-should-be-deep"><span>Chapter 4 Modules Should Be Deep</span></a></h1><p>One of the most important techniques for managing software complexity is to design systems so that developers only need to face a small fraction of the overall complexity at any given time. This approach is called <em>modular design</em>, and this chapter presents its basic principles.</p><h2 id="_4-1-modular-design" tabindex="-1"><a class="header-anchor" href="#_4-1-modular-design"><span>4.1 Modular design</span></a></h2><h2 id="_4-2-what-s-in-an-interface" tabindex="-1"><a class="header-anchor" href="#_4-2-what-s-in-an-interface"><span>4.2 What’s in an interface?</span></a></h2><h2 id="_4-3-abstractions" tabindex="-1"><a class="header-anchor" href="#_4-3-abstractions"><span>4.3 Abstractions</span></a></h2><h2 id="_4-4-deep-modules" tabindex="-1"><a class="header-anchor" href="#_4-4-deep-modules"><span>4.4 Deep modules</span></a></h2><h2 id="_4-5-shallow-modules" tabindex="-1"><a class="header-anchor" href="#_4-5-shallow-modules"><span>4.5 Shallow modules</span></a></h2><h2 id="_4-6-classitis" tabindex="-1"><a class="header-anchor" href="#_4-6-classitis"><span>4.6 Classitis</span></a></h2><h2 id="_4-7-examples-java-and-unix-i-o" tabindex="-1"><a class="header-anchor" href="#_4-7-examples-java-and-unix-i-o"><span>4.7 Examples: Java and Unix I/O</span></a></h2><h2 id="_4-8-conclusion" tabindex="-1"><a class="header-anchor" href="#_4-8-conclusion"><span>4.8 Conclusion</span></a></h2><p>By separating the interface of a module from its implementation, we can hide the complexity of the implementation from the rest of the system. Users of a module need only understand the abstraction provided by its interface. The most important issue in designing classes and other modules is to make them deep, so that they have simple interfaces for the common use cases, yet still provide significant functionality. This maximizes the amount of complexity that is concealed.</p><p>1There exist languages, mostly in the research community, where the overall behavior of a method or function can be described formally using a specification language. The specification can be checked automatically to ensure that it matches the implementation. An interesting question is whether such a formal specification could replace the informal parts of an interface. My current opinion is that an interface described in English is likely to be more intuitive and understandable for developers than one written in a formal specification language.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/aposd-zh/assets/app-BS85qt4H.js" defer></script>
  </body>
</html>
