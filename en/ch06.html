<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>Chapter 6 General-Purpose Modules are Deeper | A Philosophy of Software Design</title><meta name="description" content="">
    <link rel="preload" href="/aposd-zh/assets/style-BBqKdvbw.css" as="style"><link rel="stylesheet" href="/aposd-zh/assets/style-BBqKdvbw.css">
    <link rel="modulepreload" href="/aposd-zh/assets/app-CxdzrcGy.js"><link rel="modulepreload" href="/aposd-zh/assets/ch06.html-CVGppgGS.js">
    <link rel="prefetch" href="/aposd-zh/assets/index.html-BuGWnAtR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-DVrxbZBB.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-DuvmKQnY.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-OR2mgNYc.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-6hQ6yKTo.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-BVtbCwkZ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-BlqCRg2K.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-BMEqRTdU.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-DRsM1Z4k.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-CeRVOuL3.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-IEp_QAST.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-DDB3xSe-.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-BQzBZIor.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-DQZDT9lk.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-BfLvDYtc.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-0g29Zd0y.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-ByNxzrdQ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-DffKRcFL.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-DuBe6MA8.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-J5W8fLcC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-BhYD9pCo.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-CA04H0Il.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-BdflEu1q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-BM6YjDqD.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-3qyBCC16.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-D70ym_0Z.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-CmsvbMAw.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-CqxuCbiC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-Kxr-er8V.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-BMgPcs0q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-C7teH-fk.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-Pa942VTi.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-Dl1mKIJY.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-CvLuq5FV.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-Dyp5iui-.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-DDHmyU9h.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-M8O5Hw2q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-rH3E94N3.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-fqE8bH44.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-TV5VzhJd.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-BzwkvYgn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-Drc6PGTd.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html--aQnRh5l.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-CHHFS3ue.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-CLF9ElvE.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-CaSOkgkp.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-C-QYNcJL.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/404.html-BnnSuFho.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/aposd-zh/en/"><!----><span class="site-name" aria-hidden="true">A Philosophy of Software Design</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/aposd-zh/ch06.html" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/aposd-zh/" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/yingang/aposd-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link" href="/aposd-zh/ch06.html" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active" href="/aposd-zh/" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/yingang/aposd-zh" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Chapter 6 General-Purpose Modules are Deeper <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link sidebar-item" href="/aposd-zh/#_6-1-make-classes-somewhat-general-purpose" aria-label="6.1 Make classes somewhat general-purpose"><!--[--><!--]--> 6.1 Make classes somewhat general-purpose <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/aposd-zh/#_6-2-example-storing-text-for-an-editor" aria-label="6.2 Example: storing text for an editor"><!--[--><!--]--> 6.2 Example: storing text for an editor <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/aposd-zh/#_6-3-a-more-general-purpose-api" aria-label="6.3 A more general-purpose API"><!--[--><!--]--> 6.3 A more general-purpose API <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/aposd-zh/#_6-4-generality-leads-to-better-information-hiding" aria-label="6.4 Generality leads to better information hiding"><!--[--><!--]--> 6.4 Generality leads to better information hiding <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/aposd-zh/#_6-5-questions-to-ask-yourself" aria-label="6.5 Questions to ask yourself"><!--[--><!--]--> 6.5 Questions to ask yourself <!--[--><!--]--></a><!----></li><li><a class="route-link sidebar-item" href="/aposd-zh/#_6-6-conclusion" aria-label="6.6 Conclusion"><!--[--><!--]--> 6.6 Conclusion <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="chapter-6-general-purpose-modules-are-deeper" tabindex="-1"><a class="header-anchor" href="#chapter-6-general-purpose-modules-are-deeper"><span>Chapter 6 General-Purpose Modules are Deeper</span></a></h1><p>One of the most common decisions that you will face when designing a new module is whether to implement it in a general-purpose or special-purpose fashion. Some might argue that you should take a general-purpose approach, in which you implement a mechanism that can be used to address a broad range of problems, not just the ones that are important today. In this case, the new mechanism may find unanticipated uses in the future, thereby saving time. The general-purpose approach seems consistent with the investment mindset discussed in Chapter 3, where you spend a bit more time up front to save time later on.</p><p>On the other hand, we know that it’s hard to predict the future needs of a software system, so a general-purpose solution might include facilities that are never actually needed. Furthermore, if you implement something that is too general-purpose, it might not do a good job of solving the particular problem you have today. As a result, some might argue that it’s better to focus on today’s needs, building just what you know you need, and specializing it for the way you plan to use it today. If you take the special-purpose approach and discover additional uses later, you can always refactor it to make it general-purpose. The special-purpose approach seems consistent with an incremental approach to software development.</p><h2 id="_6-1-make-classes-somewhat-general-purpose" tabindex="-1"><a class="header-anchor" href="#_6-1-make-classes-somewhat-general-purpose"><span>6.1 Make classes somewhat general-purpose</span></a></h2><h2 id="_6-2-example-storing-text-for-an-editor" tabindex="-1"><a class="header-anchor" href="#_6-2-example-storing-text-for-an-editor"><span>6.2 Example: storing text for an editor</span></a></h2><h2 id="_6-3-a-more-general-purpose-api" tabindex="-1"><a class="header-anchor" href="#_6-3-a-more-general-purpose-api"><span>6.3 A more general-purpose API</span></a></h2><h2 id="_6-4-generality-leads-to-better-information-hiding" tabindex="-1"><a class="header-anchor" href="#_6-4-generality-leads-to-better-information-hiding"><span>6.4 Generality leads to better information hiding</span></a></h2><h2 id="_6-5-questions-to-ask-yourself" tabindex="-1"><a class="header-anchor" href="#_6-5-questions-to-ask-yourself"><span>6.5 Questions to ask yourself</span></a></h2><h2 id="_6-6-conclusion" tabindex="-1"><a class="header-anchor" href="#_6-6-conclusion"><span>6.6 Conclusion</span></a></h2><p>General-purpose interfaces have many advantages over special-purpose ones. They tend to be simpler, with fewer methods that are deeper. They also provide a cleaner separation between classes, whereas special-purpose interfaces tend to leak information between classes. Making your modules somewhat general-purpose is one of the best ways to reduce overall system complexity.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/aposd-zh/assets/app-CxdzrcGy.js" defer></script>
  </body>
</html>
