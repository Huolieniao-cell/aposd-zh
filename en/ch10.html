<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>Chapter 10 Define Errors Out Of Existence | A Philosophy of Software Design</title><meta name="description" content="">
    <link rel="preload" href="/aposd-zh/assets/style-yNDEjq-q.css" as="style"><link rel="stylesheet" href="/aposd-zh/assets/style-yNDEjq-q.css">
    <link rel="modulepreload" href="/aposd-zh/assets/app-BsN-Syn1.js"><link rel="modulepreload" href="/aposd-zh/assets/ch10.html-BculLDji.js">
    <link rel="prefetch" href="/aposd-zh/assets/index.html-CzSCSYxQ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-Cut_cHdP.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-BnRpy17e.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-DvV0izLa.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-0VSblFMZ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-DAnR6IcR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-C7dg3OL0.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-BXtovld4.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-DG1gIiXk.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-D_j9tfZN.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-CK-rmS5x.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-BDne01NE.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-WOe8i1gU.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-DJXYNNBG.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-DonMSSx0.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-DF4623UH.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-muXvakXT.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-DCf2GSXm.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-jc-0btoR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-Cvgj1yx1.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-BwiAYUeh.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-DGfTp7pC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-BtKMJOxR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-BpzYGfgh.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-Dr7sbx6d.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-B_IR313z.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-DLxtnhTM.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-D4kTeh1s.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-Euv7NcDT.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-DEFANYu5.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-DCQgyQZn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-Df5NNZ0Y.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-wZxRe4X3.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-x-ZK-Pvz.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-CPURGCqR.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-DGHujkwn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-Dzj2EFBw.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-BjmFpEmf.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-CwJQL2R4.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-DiWhxYyy.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-B4xYEoXn.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-BfmtgjEf.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-espF6HDo.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-wJqVKQDO.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-C6bFcn7C.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-Cr7Z5loo.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-BYv_wKtE.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/index.html-eFocVmVd.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch01.html-DkPsH19C.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch02.html-DC_R-INu.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch03.html-BguDeM-0.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch04.html-BY6YBzCY.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch05.html-D3P4zXb5.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch06.html-kT9diWpI.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch07.html-Da3ZNvXo.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch08.html-Blar4ozh.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch09.html-ChChDKC-.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch10.html-CtqJiokH.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch11.html-Dgigdyvd.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch12.html-Ci4VQFVx.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch13.html-BTYyN5mQ.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch14.html-BXgVn_4h.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch15.html-WSm9682x.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch16.html-fFPI0jgF.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch17.html-CqiiIWeC.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch18.html-vn34W0t4.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch19.html-CNXEJWjo.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch20.html-CnQgXL-Q.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/ch21.html-CTLRBxXX.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/preface.html-DSxm1l6w.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/summary.html-Sb64yzly.js" as="script"><link rel="prefetch" href="/aposd-zh/assets/404.html-CIcHmAut.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container external-link-icon"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/aposd-zh/en/"><!----><span class="site-name" aria-hidden="true">A Philosophy of Software Design</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/ch10.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/aposd-zh/en/ch10.html" aria-label="English"><!---->English<!----></a></li><li class="navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/zh-tw/ch10.html" aria-label="繁体中文"><!---->繁体中文<!----></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="auto-link external-link" href="https://github.com/yingang/aposd-zh" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/ch10.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/aposd-zh/en/ch10.html" aria-label="English"><!---->English<!----></a></li><li class="navbar-dropdown-item"><a class="route-link auto-link" href="/aposd-zh/zh-tw/ch10.html" aria-label="繁体中文"><!---->繁体中文<!----></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="auto-link external-link" href="https://github.com/yingang/aposd-zh" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Chapter 10 Define Errors Out Of Existence <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link auto-link sidebar-item" href="#_10-1-why-exceptions-add-complexity" aria-label="10.1 Why exceptions add complexity"><!---->10.1 Why exceptions add complexity<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-2-too-many-exceptions" aria-label="10.2 Too many exceptions"><!---->10.2 Too many exceptions<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-3-define-errors-out-of-existence" aria-label="10.3 Define errors out of existence"><!---->10.3 Define errors out of existence<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-4-example-file-deletion-in-windows" aria-label="10.4 Example: file deletion in Windows"><!---->10.4 Example: file deletion in Windows<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-5-example-java-substring-method" aria-label="10.5 Example: Java substring method"><!---->10.5 Example: Java substring method<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-6-mask-exceptions" aria-label="10.6 Mask exceptions"><!---->10.6 Mask exceptions<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-7-exception-aggregation" aria-label="10.7 Exception aggregation"><!---->10.7 Exception aggregation<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-8-just-crash" aria-label="10.8 Just crash?"><!---->10.8 Just crash?<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-9-design-special-cases-out-of-existence" aria-label="10.9 Design special cases out of existence"><!---->10.9 Design special cases out of existence<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-10-taking-it-too-far" aria-label="10.10 Taking it too far"><!---->10.10 Taking it too far<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#_10-11-conclusion" aria-label="10.11 Conclusion"><!---->10.11 Conclusion<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="chapter-10-define-errors-out-of-existence" tabindex="-1"><a class="header-anchor" href="#chapter-10-define-errors-out-of-existence"><span>Chapter 10 Define Errors Out Of Existence</span></a></h1><p>Exception handling is one of the worst sources of complexity in software systems. Code that deals with special conditions is inherently harder to write than code that deals with normal cases, and developers often define exceptions without considering how they will be handled. This chapter discusses why exceptions contribute disproportionately to complexity, then it shows how to simplify exception handling. The key overall lesson from this chapter is to reduce the number of places where exceptions must be handled; in many cases the semantics of operations can be modified so that the normal behavior handles all situations and there is no exceptional condition to report (hence the title of this chapter).</p><h2 id="_10-1-why-exceptions-add-complexity" tabindex="-1"><a class="header-anchor" href="#_10-1-why-exceptions-add-complexity"><span>10.1 Why exceptions add complexity</span></a></h2><h2 id="_10-2-too-many-exceptions" tabindex="-1"><a class="header-anchor" href="#_10-2-too-many-exceptions"><span>10.2 Too many exceptions</span></a></h2><h2 id="_10-3-define-errors-out-of-existence" tabindex="-1"><a class="header-anchor" href="#_10-3-define-errors-out-of-existence"><span>10.3 Define errors out of existence</span></a></h2><h2 id="_10-4-example-file-deletion-in-windows" tabindex="-1"><a class="header-anchor" href="#_10-4-example-file-deletion-in-windows"><span>10.4 Example: file deletion in Windows</span></a></h2><h2 id="_10-5-example-java-substring-method" tabindex="-1"><a class="header-anchor" href="#_10-5-example-java-substring-method"><span>10.5 Example: Java substring method</span></a></h2><h2 id="_10-6-mask-exceptions" tabindex="-1"><a class="header-anchor" href="#_10-6-mask-exceptions"><span>10.6 Mask exceptions</span></a></h2><h2 id="_10-7-exception-aggregation" tabindex="-1"><a class="header-anchor" href="#_10-7-exception-aggregation"><span>10.7 Exception aggregation</span></a></h2><h2 id="_10-8-just-crash" tabindex="-1"><a class="header-anchor" href="#_10-8-just-crash"><span>10.8 Just crash?</span></a></h2><h2 id="_10-9-design-special-cases-out-of-existence" tabindex="-1"><a class="header-anchor" href="#_10-9-design-special-cases-out-of-existence"><span>10.9 Design special cases out of existence</span></a></h2><h2 id="_10-10-taking-it-too-far" tabindex="-1"><a class="header-anchor" href="#_10-10-taking-it-too-far"><span>10.10 Taking it too far</span></a></h2><h2 id="_10-11-conclusion" tabindex="-1"><a class="header-anchor" href="#_10-11-conclusion"><span>10.11 Conclusion</span></a></h2><p>Special cases of any form make code harder to understand and increase the likelihood of bugs. This chapter focused on exceptions, which are one of the most significant sources of special-case code, and discussed how to reduce the number of places where exceptions must be handled. The best way to do this is by redefining semantics to eliminate error conditions. For exceptions that can’t be defined away, you should look for opportunities to mask them at a low level, so their impact is limited, or aggregate several special-case handlers into a single more generic handler. Together, these techniques can have a significant impact on overall system complexity.</p><p>1Ding Yuan et. al., “Simple Testing Can Prevent Most Critical Failures: An Analysis of Production Failures in Distributed Data-Intensive Systems,” 2014 USENIX Conference on Operating System Design and Implementation.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/aposd-zh/assets/app-BsN-Syn1.js" defer></script>
  </body>
</html>
